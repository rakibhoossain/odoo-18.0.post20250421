<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Record rules -->
        <record id="ems_station_user_rule" model="ir.rule">
            <field name="name">EMS Station User Access</field>
            <field name="model_id" ref="model_ems_station"/>
            <field name="domain_force">[('active', '=', True)]</field>
            <field name="groups" eval="[(4, ref('group_ems_paramedic'))]"/>
        </record>

        <record id="ems_safe_user_rule" model="ir.rule">
            <field name="name">EMS Safe User Access</field>
            <field name="model_id" ref="model_ems_safe"/>
            <field name="domain_force">[('active', '=', True)]</field>
            <field name="groups" eval="[(4, ref('group_ems_paramedic'))]"/>
        </record>

        <record id="ems_pouch_user_rule" model="ir.rule">
            <field name="name">EMS Pouch User Access</field>
            <field name="model_id" ref="model_ems_pouch"/>
            <field name="domain_force">[('active', '=', True), '|', ('user_id', '=', user.id), ('station_id', 'in', user.ems_profile_ids.station_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_ems_paramedic'))]"/>
        </record>

        <record id="ems_drug_lot_user_rule" model="ir.rule">
            <field name="name">EMS Drug Lot User Access</field>
            <field name="model_id" ref="model_ems_drug_lot"/>
            <field name="domain_force">[('station_id', 'in', user.ems_profile_ids.station_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_ems_paramedic'))]"/>
        </record>

        <!-- Groups -->
        <record id="group_ems_paramedic" model="res.groups">
            <field name="name">Paramedic</field>
            <field name="category_id" ref="base.module_category_healthcare"/>
        </record>

        <record id="group_ems_manager" model="res.groups">
            <field name="name">Station Manager</field>
            <field name="category_id" ref="base.module_category_healthcare"/>
            <field name="implied_ids" eval="[(4, ref('group_ems_paramedic'))]"/>
        </record>

        <record id="group_ems_superadmin" model="res.groups">
            <field name="name">System Superadmin</field>
            <field name="category_id" ref="base.module_category_healthcare"/>
            <field name="implied_ids" eval="[(4, ref('group_ems_manager'))]"/>
        </record>
    </data>
</odoo>